---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Docs">
  <h1>LeetDreamer</h1>
  <p class="subtitle">Generate narrated algorithm visualization videos from JSON specs.</p>

  <div class="command-block">
    <code>python build.py scenes/two_sum/hashtable/scene.json -v</code>
  </div>

  <h2>Audio-First Pipeline</h2>
  <p>LeetDreamer generates TTS audio first, extracts durations, then drives animation timing from those durations. Narration and visuals stay perfectly synchronized without manual tweaking.</p>

  <div class="feature-grid">
    <div class="feature-card">
      <h3 data-icon="ðŸŽ¯">Single Source of Truth</h3>
      <p>One JSON file controls both animation state and narration text. No sync issues.</p>
    </div>
    <div class="feature-card">
      <h3 data-icon="ðŸ”Œ">Adapter Architecture</h3>
      <p>Swap TTS engines, recording backends, and merge strategies without changing scene specs.</p>
    </div>
    <div class="feature-card">
      <h3 data-icon="âœ…">Schema Validation</h3>
      <p>Pydantic validates every scene spec. Catch errors before rendering starts.</p>
    </div>
    <div class="feature-card">
      <h3 data-icon="ðŸŽ¨">Jinja2 Templates</h3>
      <p>HTML templates receive step data and timing. Full control over visualization style.</p>
    </div>
  </div>

  <h2>How It Works</h2>
  <ol>
    <li><strong>Parse scene spec</strong> â€” Load JSON, validate with Pydantic schema</li>
    <li><strong>Generate audio</strong> â€” TTS adapter creates WAV files for each narration step</li>
    <li><strong>Extract durations</strong> â€” Measure each audio clip to drive timing</li>
    <li><strong>Render animation</strong> â€” Jinja2 template produces timed HTML animation</li>
    <li><strong>Record video</strong> â€” Playwright captures the animation to WebM</li>
    <li><strong>Merge tracks</strong> â€” FFmpeg combines video + audio into final MP4</li>
  </ol>

  <h2>Next Steps</h2>
  <p>Read the <a href="/architecture">Architecture</a> docs to understand the pipeline internals, or jump to <a href="/usage">Usage</a> to start building scenes.</p>
</BaseLayout>
